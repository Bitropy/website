---
import type { PaginateFunction } from "astro";
import { getCollection } from "astro:content";

export async function getStaticPaths({
  paginate,
}: {
  paginate: PaginateFunction;
}) {
  const PAGE_SIZE = 6;
  const allPosts = await getCollection("blog", ({ data }) => {
    return !data.draft && data.publishDate < new Date();
  });

  const allSortedPosts = allPosts.sort(function (a, b) {
    return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
  });

  return paginate(allSortedPosts, {
    pageSize: PAGE_SIZE,
  });
}

return Astro.redirect("/");
---
