---
import Link from "@/components/ui/link.astro";
import { Icon } from "astro-icon/components";
---

<div class="absolute top-0 right-0 w-full h-[800px] md:h-[900px] pointer-events-none -z-10" style="mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%);">
  <div id="grain-gradient-container" class="w-full h-full"></div>
</div>

<main class="grid lg:grid-cols-2 pt-8 pb-8 md:pt-16 md:pb-24 relative">
  <div class="relative z-10">
    <h1 class="text-4xl lg:text-5xl xl:text-6xl font-bold lg:tracking-tight xl:tracking-tighter" style="text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.4);">
      <span class="relative inline-block align-baseline">
        <span
          class="rounded px-1"
          style="background: linear-gradient(90deg, #967deb26, #967deb1A)">
          Uncompromised AI
        </span>
        <svg
          aria-hidden="true"
          class="pointer-events-none absolute left-0 -bottom-1 w-full h-[10px] text-[#967deb]/70 dark:text-[#967deb]/60"
          viewBox="0 0 100 10"
          preserveAspectRatio="none">
          <path
            d="M2 8 C 20 2, 40 12, 58 6 S 90 2, 98 6"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"></path>
        </svg>
      </span>
      <br />
      Built for what's next.
      <br />
      Bitropy.
    </h1>
    <div class="text-lg mt-6 text-slate-600 max-w-xl space-y-4" style="text-shadow: 0 0 15px rgba(255, 255, 255, 0.9), 0 0 30px rgba(255, 255, 255, 0.7);">
      <p>
        AI assistants don't live in isolation. To be useful, they need to read from databases, create tickets, call APIs, send emails, and trigger internal tools.
      </p>
      <p>
        Today this usually happens through custom integrations that are fragile, inconsistent, and hard to secure.
      </p>
      <p>
        MCP (Model Context Protocol) is emerging as a standard way for AI to talk to tools and data â€” like USB-C for AI systems.
      </p>
      <p>
        Bitropy is the enterprise layer that makes MCP safe, observable, and manageable at scale.
      </p>
      <p>
        We sit between your AI agents and your systems, acting as a secure gateway where access, data flow, and execution are controlled by design.
      </p>
    </div>
    <div class="mt-6 flex flex-col sm:flex-row gap-3">
      <Link href="/contact" class="flex gap-1 items-center justify-center">
        <Icon class="text-white w-5 h-5" name="bx:bxs-paper-plane" />
        Get Started
      </Link>
      <Link
        size="lg"
        style="outline"
        href="/products"
        class="flex gap-1 items-center justify-center">
        <Icon class="text-black w-4 h-4" name="bx:bxs-info-circle" />
        Learn More
      </Link>
    </div>
  </div>
</main>

<script>
  import {
    ShaderMount,
    grainGradientFragmentShader,
    getShaderNoiseTexture
  } from "@paper-design/shaders";

  function initShader() {
    const container = document.getElementById('grain-gradient-container');

    if (!container) {
      return;
    }

    if (container.querySelector('canvas')) {
      return;
    }

    const noiseTexture = getShaderNoiseTexture();

    if (!noiseTexture) {
      // in case the shader is not loaded, may only happen on old browser without webgl support
      return;
    }

    const createShader = () => {
      new ShaderMount(
        container,
        grainGradientFragmentShader,
        {
          u_colorsCount: 3,
          u_colors: [
            [0.545, 0.361, 0.965, 1],
            [0.655, 0.545, 0.980, 1],
            [0.988, 0.827, 0.302, 1],
          ],
          u_softness: 0.8,
          u_intensity: 0.2,
          u_noise: 0,
          u_shape: 6,
          u_scale: 1.25,
          u_rotation: 180,
          u_offsetX: 0.85,
          u_offsetY: -0.2,
          u_noiseTexture: noiseTexture,
        },
        undefined,
        1
      );
    };

    noiseTexture.onload = createShader;
    if (noiseTexture.complete) {
      createShader();
    }
  }

  initShader();

  // Reinitialize after Astro view transitions
  document.addEventListener('astro:page-load', initShader);
</script>
